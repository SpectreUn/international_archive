<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spectre Archive</title>
    <link rel="stylesheet" href="styles_archive.css">
</head>
<body>
    <div class="header">
        <h1>Spectre Initative International Archive</h1>
    </div>

    <!-- Navigation Bar -->
    <nav class="nav-bar">
        <a href="home.html">Home</a>
        <a href="archive.html" class="active">Archive</a>
        <a href="FAQs.html">FAQs</a>
    </nav>

    <div class="container">
        <div class="search-box">
            <input type="text" id="searchInput" placeholder="Search by reference number or keywords...">
        </div>
        
        <div id="documentsContainer">
            <!-- Documents will be loaded here -->
        </div>
    </div>

    <script>
        // Hardcoded document data
        const documents = [
            {
                ref: "SPC-2023-001",
                title: "Operation Midnight Sun",
                date: "2023-11-15",
                tags: ["Arctic", "Surveillance"],
                confidential: true,
                summary: "Final report on Arctic surveillance operations.",
                content: "All assets were successfully extracted with minimal complications. Weather conditions proved more challenging than anticipated, requiring adjustment to extraction timelines. Recommend additional cold weather gear for future operations in this region."
            },
            {
                ref: "SPC-2023-002",
                title: "Weekly Intelligence Briefing",
                date: "2023-10-22",
                tags: ["Weekly", "Sector 7"],
                confidential: false,
                summary: "Summary of field agent reports and signal intercepts.",
                content: "Increased activity detected in Sector 7. All other sectors reporting normal status. Signal intercepts suggest possible communication between unknown parties using encrypted channels. Three new frequencies identified for monitoring."
            },
            {
                ref: "SPC-2023-003",
                title: "Asset Extraction Protocol",
                date: "2023-09-18",
                tags: ["Protocol", "Emergency"],
                confidential: true,
                summary: "Standard operating procedures for emergency extraction.",
                content: "Updated safe house locations and new verification codes for Q4 2023. All field agents must acknowledge receipt of this update. Changes include new extraction points in urban areas and revised authentication procedures."
            },
            {
                ref: "SPC-2023-004",
                title: "Southeast Asia Threat Assessment",
                date: "2023-08-05",
                tags: ["Threat", "Southeast Asia"],
                confidential: false,
                summary: "Recent developments in Southeast Asian region.",
                content: "Shifting alliances detected. Three new persons of interest identified. Recommended increased surveillance on shipping lanes near coordinates 12.3456, 98.7654. Particular attention should be paid to cargo manifests from identified vessels."
            };

        // Format date
        function formatDate(dateString) {
            const options = { year: 'numeric', month: 'short', day: 'numeric' };
            return new Date(dateString).toLocaleDateString('en-US', options);
        }

        // Render documents
        function renderDocuments(searchTerm = '') {
            const container = document.getElementById('documentsContainer');
            container.innerHTML = '';
            
            const searchLower = searchTerm.toLowerCase();
            const isRefSearch = searchLower.startsWith("spc-") || searchLower.startsWith("spc");
            
            const filteredDocs = documents.filter(doc => {
                // Always show if not confidential
                if (!doc.confidential) return true;
                
                // Show confidential docs only if searched by exact reference
                if (doc.confidential) {
                    return doc.ref.toLowerCase() === searchLower || 
                           doc.ref.toLowerCase().includes(searchLower);
                }
                
                return false;
            }).filter(doc => {
                // Additional filtering for non-confidential docs
                if (!doc.confidential) {
                    return doc.ref.toLowerCase().includes(searchLower) || 
                           doc.title.toLowerCase().includes(searchLower) ||
                           doc.summary.toLowerCase().includes(searchLower) ||
                           doc.tags.some(tag => tag.toLowerCase().includes(searchLower));
                }
                return true;
            });
            
            if (filteredDocs.length === 0) {
                container.innerHTML = '<div class="no-results">No documents found matching your search criteria.</div>';
                return;
            }
            
            filteredDocs.forEach(doc => {
                const docElement = document.createElement('div');
                docElement.className = `document ${doc.confidential && !isRefSearch ? 'hidden-doc' : ''}`;
                docElement.innerHTML = `
                    <div class="document-header">
                        <div>
                            <div class="document-title">${doc.title}</div>
                            <div class="document-meta">
                                <span class="document-ref">${doc.ref}</span>
                                ${doc.tags.map(tag => `<span class="document-tag">${tag}</span>`).join('')}
                                ${doc.confidential ? '<span class="confidential-tag">CONFIDENTIAL</span>' : ''}
                                <span class="document-date">${formatDate(doc.date)}</span>
                            </div>
                            <div class="document-summary">${doc.summary}</div>
                        </div>
                        <div class="expand-icon">â–¼</div>
                    </div>
                    <div class="document-content">
                        <p>${doc.content}</p>
                    </div>
                `;
                container.appendChild(docElement);
                
                // Add click handler
                docElement.querySelector('.document-header').addEventListener('click', () => {
                    docElement.classList.toggle('active');
                });
            });
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            renderDocuments();
            
            // Search functionality
            document.getElementById('searchInput').addEventListener('input', (e) => {
                renderDocuments(e.target.value);
            });
        });
    </script>
</body>
</html>
